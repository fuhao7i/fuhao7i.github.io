I"ü<h1 id="1-ä¸ºä»€ä¹ˆè¦å¯¹é¥æ„Ÿå›¾åƒè¿›è¡Œåˆ‡åˆ†">1. ä¸ºä»€ä¹ˆè¦å¯¹é¥æ„Ÿå›¾åƒè¿›è¡Œåˆ‡åˆ†ï¼Ÿ</h1>
<p>ä¸€èˆ¬çš„é¥æ„Ÿå›¾åƒå°ºå¯¸éƒ½æ˜¯éå¸¸å¤§çš„ï¼Œå°±åƒè¿™é‡Œæˆ‘ä»¬ç”¨çš„ISPRSé¥æ„Ÿå›¾åƒæ•°æ®é›†ï¼Œæ¯å¼ é¥æ„Ÿå›¾åƒ.ttfçš„å°ºå¯¸éƒ½æ˜¯6000 x 6000ï¼Œè¿™æ ¹æœ¬å°±ä¸èƒ½ç”¨äºæˆ‘ä»¬çš„æ¨¡å‹è®­ç»ƒğŸ˜£(å†…å­˜ç¬å¹²çˆ†ç‚¸ğŸ’¥)ï¼Œå› æ­¤éœ€è¦æˆ‘ä»¬è‡ªå·±å°†å¤§çš„é¥æ„Ÿå›¾åƒåˆ‡åˆ†æˆè‡ªå·±éœ€è¦çš„å°ºå¯¸ï¼Œåƒæ˜¯å¸¸ç”¨çš„224 x 224ï¼Œ512 x 512ç­‰ã€‚</p>

<p><img src="https://img-blog.csdnimg.cn/20201221231843185.png#pic_center" width="50%" /></p>

<p>å¤§å®¶å¯ä»¥åˆ©ç”¨å¦‚ä¸‹ä»£ç å°†é¥æ„Ÿå›¾åƒåˆ‡åˆ†æˆ224 x 224çš„å¤§å°ï¼Œå¦‚éœ€æ”¹æˆå…¶ä»–å°ºå¯¸å¯ä»¥ç¨ä½œä¿®æ”¹ã€‚</p>

<h1 id="2-åˆ‡åˆ†å›¾åƒåˆ¶ä½œæ•°æ®é›†">2. åˆ‡åˆ†å›¾åƒï¼Œåˆ¶ä½œæ•°æ®é›†</h1>

<p>Labelså›¾åƒçš„å¤§å°å’Œé¥æ„Ÿå›¾åƒçš„å¤§å°æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨åˆ‡åˆ†å›¾åƒçš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦ä¸€å—æŠŠLabelså›¾åƒåˆ‡åˆ†äº†ï¼Œä»¥ä¾¿RGBå›¾åƒå’ŒLabelså›¾åƒå¯¹åº”ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">gen_datasets.py</code></p>

<p>å› ä¸ºæˆ‘çš„ç”µè„‘æ‰¿å—ä¸äº†å¤ªå¤§çš„æ•°æ®é›†ğŸ˜…ï¼Œæ‰€ä»¥åœ¨åˆ¶ä½œæ•°æ®é›†çš„æ—¶å€™æˆ‘åªåˆ‡åˆ†äº†ä¸€å¼ é¥æ„Ÿå›¾åƒã€‚</p>

<html>
<style>
    .mac {
        width:10px;
        height:10px;
        border-radius:5px;
        float:left;
        margin:10px 0 0 5px;
    }
    .b1 {
        background:#E0443E;
        margin-left: 10px;
    }
    .b2 { background:#DEA123; }
    .b3 { background:#1AAB29; }
    .warpper{
        background:#121212;
        border-radius:5px;
        width:100%;
    }
</style>

<div class="warpper">
    <div class="mac b1"></div>
    <div class="mac b2"></div>
    <div class="mac b3"></div>
<div>
<br />
&lt;/html&gt;

```python
import cv2
import numpy


img1 = cv2.imread('/Users/fuhao7i/Desktop/åŒ—æ¼ /ISPRSé¥æ„Ÿå›¾åƒåˆ†å‰²/2_Ortho_RGB/top_potsdam_2_10_RGB.tif') #è¯»å–RGBåŸå›¾åƒ

img2 = cv2.imread('/Users/fuhao7i/Desktop/åŒ—æ¼ /ISPRSé¥æ„Ÿå›¾åƒåˆ†å‰²/5_Labels_all/top_potsdam_2_10_label.tif') #è¯»å–Labelså›¾åƒ

#å› ä¸º6000/224 = 26ï¼Œæ‰€ä»¥6000x6000çš„å›¾åƒå¯ä»¥åˆ’åˆ†ä¸º26x26ä¸ª224x224å¤§å°çš„å›¾åƒ
for i in range(26):
    for j in range(26):
        img1_ = img1[224*i : 224*(i+1), 224*j : 224*(j+1), : ]
        img2_ = img2[224*i : 224*(i+1), 224*j : 224*(j+1), : ]

        name = i*26 + j
        #è®©RGBå›¾åƒå’Œæ ‡ç­¾å›¾åƒçš„æ–‡ä»¶åå¯¹åº”
        name = str(name)
        cv2.imwrite('./jpg/'+ name + '.jpg', img1_) #æ‰€æœ‰çš„RGBå›¾åƒéƒ½æ”¾åˆ°jpgæ–‡ä»¶å¤¹ä¸‹
        cv2.imwrite('./png/'+ name + '.png', img2_) #æ‰€æœ‰çš„æ ‡ç­¾å›¾åƒéƒ½æ”¾åˆ°pngæ–‡ä»¶å¤¹ä¸‹
        

`e.g.`

<img src="https://img-blog.csdnimg.cn/20201221232942188.png#pic_center" width="90%" />

`gen_testdata.py`

åŒç†å¯ä»¥å¾—åˆ°æµ‹è¯•é›†å›¾åƒã€‚

```python
import cv2
import numpy

testdata_path = '/Users/fuhao7i/Desktop/åŒ—æ¼ /ISPRSé¥æ„Ÿå›¾åƒåˆ†å‰²/2_Ortho_RGB/top_potsdam_2_13_RGB.tif'

img = cv2.imread(testdata_path)


for i in range(18,26):
    for j in range(18,26):
        img_ = img[224*i : 224*(i+1), 224*j : 224*(j+1), : ]

        name = i*26 + j
        name = str(name)
        cv2.imwrite('./test/'+ name + '.jpg', img_)
```

`get_train_txt.py`

```python
import os

filename = os.listdir('./jpg')

with open('./train.txt', 'w') as f:
    for name in filename:
        name = name.split('.')[0]
        f.write(name + '.jpg;' + name + '.png\n')

```

`e.g.`

<img src="https://img-blog.csdnimg.cn/20201221232824570.png#pic_center" width="90%" />

ç°åœ¨æˆ‘ä»¬çš„é¥æ„Ÿå›¾åƒæ•°æ®é›†å°±å‡†å¤‡å¥½äº†ğŸ‰ï¼Œè®©æˆ‘ä»¬ä¸€èµ·å¼€å§‹å°èŠçš„è¯­ä¹‰åˆ†å‰²å§ï½ï½ï½
</div></div></html>
:ET